<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTrack: Pro Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .nav-item.active { background-color: #e5e7eb; color: #1f2937; border-right: 4px solid #3b82f6; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .history-scroll::-webkit-scrollbar { width: 4px; }
        .history-scroll::-webkit-scrollbar-thumb { background-color: #d1d5db; border-radius: 4px; }
        .progress-bar { transition: width 0.5s ease-in-out; }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <aside class="w-64 bg-white shadow-md hidden md:flex flex-col z-10">
        <div class="p-6 text-2xl font-bold text-blue-600">
            <i class="fa-solid fa-wallet mr-2"></i> FinTrack
        </div>
        <nav class="flex-1 mt-4 space-y-1">
            <a href="#" onclick="app.showTab('dashboard')" id="nav-dashboard" class="nav-item active flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 transition">
                <i class="fa-solid fa-chart-line w-6"></i> Dashboard
            </a>
            <a href="#" onclick="app.showTab('income')" id="nav-income" class="nav-item flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 transition">
                <i class="fa-solid fa-money-bill-trend-up w-6"></i> Income
            </a>
            <a href="#" onclick="app.showTab('transactions')" id="nav-transactions" class="nav-item flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 transition">
                <i class="fa-solid fa-list w-6"></i> Transactions
            </a>
            <a href="#" onclick="app.showTab('bills')" id="nav-bills" class="nav-item flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 transition">
                <i class="fa-solid fa-file-invoice-dollar w-6"></i> Fixed Bills
            </a>
            <a href="#" onclick="app.showTab('savings')" id="nav-savings" class="nav-item flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 transition">
                <i class="fa-solid fa-piggy-bank w-6"></i> Savings Vaults
            </a>
            <a href="#" onclick="app.showTab('budgets')" id="nav-budgets" class="nav-item flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 transition">
                <i class="fa-solid fa-sliders w-6"></i> Budgets
            </a>
            <a href="#" onclick="app.showTab('settings')" id="nav-settings" class="nav-item flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50 transition">
                <i class="fa-solid fa-gear w-6"></i> Settings
            </a>
        </nav>
        <div class="p-6 border-t space-y-4">
            <button onclick="app.exportToCSV()" class="text-xs text-blue-600 hover:underline flex items-center">
                <i class="fa-solid fa-download mr-2"></i> Export to Excel
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col h-screen overflow-y-auto">
        <header class="bg-white shadow-sm py-4 px-8 flex justify-between items-center sticky top-0 z-20">
            <h2 class="text-xl font-semibold text-gray-800" id="page-title">Dashboard Overview</h2>
            <div class="text-sm text-gray-500" id="current-date"></div>
        </header>

        <div class="p-8">
            <div id="view-dashboard" class="fade-in block">
                <div class="bg-indigo-900 text-white p-6 rounded-xl shadow-lg mb-8 relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mt-4 -mr-4 w-32 h-32 bg-indigo-800 rounded-full opacity-50"></div>
                    <div class="flex justify-between items-start mb-6 relative z-10">
                        <div>
                            <h4 class="font-bold text-lg"><i class="fa-solid fa-wallet mr-2"></i>Cash Flow</h4>
                            <p class="text-indigo-300 text-sm mt-1" id="dash-payday-count">Calculating...</p>
                        </div>
                        <span id="summary-month-name" class="bg-indigo-800 px-3 py-1 rounded text-sm font-bold border border-indigo-700">Current</span>
                    </div>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-center relative z-10 mb-6">
                        <div class="bg-indigo-800/50 p-3 rounded-lg">
                            <p class="text-indigo-300 text-xs uppercase mb-1">Income</p>
                            <p class="text-xl font-bold text-green-400" id="sum-income">0.00</p>
                        </div>
                        <div class="bg-indigo-800/50 p-3 rounded-lg">
                            <p class="text-indigo-300 text-xs uppercase mb-1">Expenses</p>
                            <p class="text-xl font-bold text-red-300" id="sum-total-expense">0.00</p>
                        </div>
                        <div class="bg-indigo-800/50 p-3 rounded-lg">
                            <p class="text-indigo-300 text-xs uppercase mb-1">Savings</p>
                            <p class="text-xl font-bold text-purple-300" id="sum-savings">0.00</p>
                        </div>
                        <div class="bg-indigo-800/50 p-3 rounded-lg border border-indigo-500">
                            <p class="text-indigo-200 text-xs uppercase mb-1">Remaining</p>
                            <p class="text-xl font-bold text-white" id="sum-net">0.00</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-4 border-t border-indigo-700/50 relative z-10">
                        <div class="flex justify-between md:block">
                            <div><p class="text-indigo-300 text-xs font-bold">Safe to Spend</p><p class="text-xs text-indigo-400">Total left</p></div>
                            <p class="text-2xl font-bold text-white mt-1" id="power-disposable">0.00</p>
                        </div>
                        <div class="flex justify-between md:block border-l-0 md:border-l border-indigo-600 md:pl-6">
                            <div><p class="text-indigo-300 text-xs font-bold">Weekly Limit</p><p class="text-xs text-indigo-400">Recommended</p></div>
                            <p class="text-xl font-bold text-yellow-300 mt-1" id="power-weekly">0.00</p>
                        </div>
                        <div class="flex justify-between md:block border-l-0 md:border-l border-indigo-600 md:pl-6">
                            <div><p class="text-indigo-300 text-xs font-bold">Daily Limit</p><p class="text-xs text-indigo-400">Recommended</p></div>
                            <p class="text-xl font-bold text-blue-300 mt-1" id="power-daily">0.00</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex flex-col justify-center items-center text-center">
                        <h4 class="font-bold text-gray-700 mb-2">Financial Health Score</h4>
                        <div class="relative w-32 h-32 flex items-center justify-center mb-2">
                            <svg class="w-full h-full" viewBox="0 0 36 36">
                                <path class="text-gray-200" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" />
                                <path id="score-circle" class="text-blue-600" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" />
                            </svg>
                            <span id="health-score" class="absolute text-4xl font-bold text-gray-800">0</span>
                        </div>
                        <p id="health-msg" class="text-xs text-gray-500">Calculate based on savings & budget</p>
                    </div>

                    <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <h4 class="font-bold text-gray-700 mb-6">Budget Adherence (50/30/20 Rule)</h4>
                        
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="font-medium text-gray-700">Needs (Target: 50%)</span>
                                    <span class="text-gray-500" id="prog-needs-text">0 / 0</span>
                                </div>
                                <div class="w-full bg-gray-100 rounded-full h-4 overflow-hidden">
                                    <div id="prog-needs-bar" class="bg-blue-500 h-4 rounded-full progress-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="font-medium text-gray-700">Wants (Target: 30%)</span>
                                    <span class="text-gray-500" id="prog-wants-text">0 / 0</span>
                                </div>
                                <div class="w-full bg-gray-100 rounded-full h-4 overflow-hidden">
                                    <div id="prog-wants-bar" class="bg-orange-500 h-4 rounded-full progress-bar" style="width: 0%"></div>
                                </div>
                            </div>

                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="font-medium text-gray-700">Savings (Target: 20%)</span>
                                    <span class="text-gray-500" id="prog-save-text">0 / 0</span>
                                </div>
                                <div class="w-full bg-gray-100 rounded-full h-4 overflow-hidden">
                                    <div id="prog-save-bar" class="bg-purple-500 h-4 rounded-full progress-bar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <h4 class="font-bold text-gray-700 mb-4">Daily Spending Trend</h4>
                        <div class="relative h-64"><canvas id="trendChart"></canvas></div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <h4 class="font-bold text-gray-700 mb-4">Spend by Category</h4>
                        <div class="relative h-64"><canvas id="expenseChart"></canvas></div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="font-bold text-gray-700">Recent Transactions</h4>
                        <button onclick="app.showTab('transactions')" class="text-sm text-blue-600 hover:underline">View All</button>
                    </div>
                    <table class="w-full text-left"><tbody id="dashboard-recent-body"></tbody></table>
                </div>
            </div>

            <div id="view-income" class="fade-in hidden">
                <div class="bg-green-600 text-white p-6 rounded-xl shadow-md mb-6 flex justify-between items-center">
                    <div>
                        <h2 class="text-3xl font-bold mb-1" id="income-payday-count">-- Days Left</h2>
                        <p class="text-green-100 text-sm">Until your Salary Day</p>
                    </div>
                    <div class="text-right">
                        <label class="text-green-100 text-xs block mb-1 font-medium">Salary Day (1-31)</label>
                        <div class="flex items-center bg-green-700 rounded p-1">
                            <input type="number" id="pay-day-input" min="1" max="31" class="bg-transparent text-white font-bold text-center w-16 outline-none" oninput="app.updatePayDay(this.value)">
                            <i class="fa-solid fa-pen text-green-300 text-xs mr-2"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl mb-6">
                    <h4 class="font-bold mb-4">Add Income</h4>
                    <form id="income-form" class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <input type="hidden" id="i-id">
                        <input type="date" id="i-date" class="border p-2 rounded">
                        <input type="text" id="i-source" placeholder="Source" class="border p-2 rounded col-span-2">
                        <div class="flex">
                            <input type="number" step="0.01" id="i-amount" placeholder="0.00" class="border p-2 rounded w-full">
                            <button type="submit" id="i-btn" class="bg-green-600 text-white px-4 rounded">Add</button>
                        </div>
                    </form>
                </div>
                <div class="bg-white p-6 rounded-xl">
                    <h4 class="font-bold mb-4">History</h4>
                    <table class="w-full text-left"><tbody id="income-table-body"></tbody></table>
                </div>
            </div>

            <div id="view-transactions" class="fade-in hidden">
                <div class="bg-white p-6 rounded-xl mb-6">
                    <h4 class="font-bold mb-4">Add Expense</h4>
                    <form id="add-form" class="grid grid-cols-1 md:grid-cols-5 gap-4">
                        <input type="hidden" id="t-id">
                        <input type="date" id="t-date" class="border p-2 rounded">
                        <input type="text" id="t-desc" placeholder="Details" class="border p-2 rounded col-span-2">
                        <select id="t-cat" class="border p-2 rounded bg-white"></select>
                        <div class="flex">
                            <input type="number" step="0.01" id="t-amount" placeholder="0.00" class="border p-2 rounded w-full">
                            <button type="submit" id="t-btn" class="bg-blue-600 text-white px-4 rounded">Add</button>
                        </div>
                    </form>
                </div>
                <div class="bg-white p-6 rounded-xl">
                    <div class="flex justify-between mb-4">
                        <h4 class="font-bold">History</h4>
                        <button onclick="app.clearTransactions()" class="text-xs text-red-500">Clear</button>
                    </div>
                    <table class="w-full text-left"><tbody id="full-table-body"></tbody></table>
                </div>
            </div>

            <div id="view-bills" class="fade-in hidden">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-4 rounded-xl h-fit space-y-3 shadow-sm border border-gray-200">
                        <h4 class="font-bold text-orange-600 text-sm">New Bill</h4>
                        <input type="text" id="b-name" placeholder="Name" class="w-full border p-2 rounded text-sm">
                        <input type="number" step="0.01" id="b-amount" placeholder="Amount" class="w-full border p-2 rounded text-sm">
                        <button onclick="app.addBill()" class="w-full bg-orange-600 text-white p-2 rounded text-sm font-bold">Add Bill</button>
                    </div>
                    <div class="md:col-span-2 space-y-4">
                        <h4 class="font-bold text-gray-700">Recurring Expenses</h4>
                        <div id="bills-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"></div>
                    </div>
                </div>
            </div>

            <div id="view-savings" class="fade-in hidden">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-4 rounded-xl h-fit space-y-3 shadow-sm border border-gray-200">
                        <h4 class="font-bold text-purple-700 text-sm">Create Vault</h4>
                        <input type="text" id="s-name" placeholder="Name" class="w-full border p-2 rounded text-sm">
                        <button onclick="app.addVault()" class="w-full bg-purple-600 text-white p-2 rounded text-sm font-bold">Create</button>
                    </div>
                    <div class="md:col-span-2 space-y-4">
                        <div class="flex justify-between"><h4 class="font-bold text-gray-700">Vaults</h4><span id="total-saved-display" class="font-bold text-purple-600">0.00</span></div>
                        <div id="savings-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"></div>
                    </div>
                </div>
            </div>

            <div id="view-budgets" class="fade-in hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-xl">
                        <h4 class="font-bold mb-4">Add Category</h4>
                        <div class="flex gap-2">
                            <input type="text" id="new-cat-name" placeholder="Name" class="border p-2 rounded w-full">
                            <select id="new-cat-logic" class="border p-2 rounded"><option value="needs">Needs</option><option value="wants">Wants</option><option value="savings">Savings</option></select>
                            <button onclick="app.addCategory()" class="bg-green-600 text-white px-4 rounded">Add</button>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl md:col-span-2"><h4 class="font-bold mb-4">Budgets</h4><table class="w-full text-left"><tbody id="settings-table-body"></tbody></table></div>
                </div>
            </div>

            <div id="view-settings" class="fade-in hidden">
                <div class="max-w-3xl mx-auto space-y-8">
                    <div class="bg-white p-6 rounded-xl border border-gray-100">
                        <h4 class="font-bold text-indigo-700 mb-4">Configuration</h4>
                        <div class="flex items-center gap-4">
                            <label>Salary Day:</label>
                            <input type="number" id="set-pay-day" min="1" max="31" class="border p-2 rounded w-20" oninput="app.updatePayDay(this.value)">
                        </div>
                    </div>
                    <div class="bg-slate-100 p-6 rounded-xl border border-slate-200">
                        <h4 class="font-bold text-slate-700 mb-4">Cloud Sync (GitHub)</h4>
                        <div class="space-y-3">
                            <input id="gh-token" type="password" placeholder="Token" class="w-full p-2 border rounded">
                            <input id="gh-gist" type="text" placeholder="Gist ID" class="w-full p-2 border rounded">
                            <button onclick="app.saveGHCreds()" class="bg-slate-800 text-white px-4 py-2 rounded text-xs">Save Keys</button>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mt-4">
                            <button onclick="app.pullFromGitHub()" class="bg-blue-600 text-white py-2 rounded">Pull</button>
                            <button onclick="app.pushToGitHub()" class="bg-green-600 text-white py-2 rounded">Push</button>
                        </div>
                    </div>
                    <div class="bg-red-50 p-6 rounded-xl border border-red-100"><button onclick="app.resetData()" class="text-red-600 border border-red-200 bg-white px-4 py-2 rounded text-xs font-bold">Reset All Data</button></div>
                </div>
            </div>
        </div>
    </main>

    <div id="wizard-modal" class="fixed inset-0 bg-slate-900/95 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden relative">
            <div class="absolute top-0 right-0 p-4"><button onclick="app.skipWizard()" class="text-gray-400 hover:text-gray-600">âœ•</button></div>
            <div id="wiz-step-0" class="p-8 text-center"><div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-3xl mx-auto mb-4"><i class="fa-solid fa-wallet"></i></div><h2 class="text-2xl font-bold text-gray-800 mb-2">Welcome</h2><p class="text-gray-500 text-sm mb-8">Setup your finances.</p><div class="space-y-3"><button onclick="app.wizNext(1)" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg">Start Wizard</button><button onclick="app.skipWizard()" class="w-full bg-white text-gray-500 py-3 rounded-xl font-bold border border-gray-200">Skip</button></div></div>
            <div id="wiz-step-1" class="hidden p-8"><h3 class="text-xl font-bold text-gray-800 mb-6">Basics</h3><div class="space-y-4"><div><label class="block text-xs font-bold text-gray-500 uppercase mb-1">Currency</label><select id="wiz-currency" class="w-full border p-3 rounded-xl bg-gray-50"><option value="â‚¬">â‚¬</option><option value="$">$</option><option value="Â£">Â£</option><option value="BGN">BGN</option></select></div><div><label class="block text-xs font-bold text-gray-500 uppercase mb-1">Salary</label><input id="wiz-salary" type="number" placeholder="0.00" class="w-full border p-3 rounded-xl bg-gray-50"></div><div><label class="block text-xs font-bold text-gray-500 uppercase mb-1">Pay Day</label><input id="wiz-payday" type="number" placeholder="1" min="1" max="31" class="w-full border p-3 rounded-xl bg-gray-50"></div></div><button onclick="app.wizNext(2)" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold mt-8">Next</button></div>
            <div id="wiz-step-2" class="hidden p-8"><h3 class="text-xl font-bold text-gray-800 mb-2">Bills</h3><p class="text-xs text-gray-500 mb-4">Rent, Internet...</p><div class="flex gap-2 mb-4"><input id="wiz-bill-name" placeholder="Name" class="flex-1 border p-2 rounded-lg text-sm"><input id="wiz-bill-amt" type="number" placeholder="Amt" class="w-20 border p-2 rounded-lg text-sm"><button onclick="app.wizAddBill()" class="bg-orange-500 text-white px-3 rounded-lg">+</button></div><div id="wiz-bills-list" class="h-40 overflow-y-auto bg-gray-50 p-2 rounded-xl mb-4 space-y-1"></div><button onclick="app.wizNext(3)" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold">Next</button></div>
            <div id="wiz-step-3" class="hidden p-8"><h3 class="text-xl font-bold text-gray-800 mb-2">Savings</h3><p class="text-xs text-gray-500 mb-4">Vaults/Goals</p><div class="flex gap-2 mb-4"><input id="wiz-vault-name" placeholder="Goal Name" class="flex-1 border p-2 rounded-lg text-sm"><button onclick="app.wizAddVault()" class="bg-purple-500 text-white px-3 rounded-lg">+</button></div><div id="wiz-vaults-list" class="h-40 overflow-y-auto bg-gray-50 p-2 rounded-xl mb-4 space-y-1"></div><button onclick="app.wizFinish()" class="w-full bg-green-600 text-white py-3 rounded-xl font-bold">Finish</button></div>
        </div>
    </div>

    <script>
    const app = {
        data: { currency: 'â‚¬', payDay: 1, incomes: [], transactions: [], savings: [], bills: [], 
            categories: [
                // --- HOUSING & UTILITIES (NEEDS) ---
                { name: 'Rent / Mortgage', group: 'Housing', logic: 'needs', limit: 0 },
                { name: 'Electricity & Water', group: 'Housing', logic: 'needs', limit: 0 },
                { name: 'Internet & Phone', group: 'Housing', logic: 'needs', limit: 0 },
                { name: 'Home Maintenance', group: 'Housing', logic: 'needs', limit: 0 },

                // --- FOOD (SPLIT LOGIC) ---
                { name: 'Groceries', group: 'Food', logic: 'needs', limit: 0 },
                { name: 'Restaurants & Takeout', group: 'Food', logic: 'wants', limit: 0 },
                { name: 'Coffee & Snacks', group: 'Food', logic: 'wants', limit: 0 },
                { name: 'Alcohol / Bars', group: 'Food', logic: 'wants', limit: 0 },

                // --- TRANSPORTATION (NEEDS) ---
                { name: 'Gas / Fuel', group: 'Transportation', logic: 'needs', limit: 0 },
                { name: 'Car Insurance', group: 'Transportation', logic: 'needs', limit: 0 },
                { name: 'Car Repairs / Service', group: 'Transportation', logic: 'needs', limit: 0 },
                { name: 'Public Transit / Train', group: 'Transportation', logic: 'needs', limit: 0 },
                { name: 'Parking & Tolls', group: 'Transportation', logic: 'needs', limit: 0 },
                { name: 'Uber / Taxi', group: 'Transportation', logic: 'wants', limit: 0 },

                // --- HEALTH (NEEDS) ---
                { name: 'Medical / Doctor', group: 'Health', logic: 'needs', limit: 0 },
                { name: 'Pharmacy / Meds', group: 'Health', logic: 'needs', limit: 0 },
                { name: 'Health Insurance', group: 'Health', logic: 'needs', limit: 0 },
                { name: 'Gym / Sports', group: 'Health', logic: 'wants', limit: 0 },

                // --- LIFESTYLE & SHOPPING (WANTS) ---
                { name: 'Clothing', group: 'Shopping', logic: 'wants', limit: 0 },
                { name: 'Electronics', group: 'Shopping', logic: 'wants', limit: 0 },
                { name: 'Household Goods', group: 'Shopping', logic: 'needs', limit: 0 },
                { name: 'Personal Care (Hair/Cosmetics)', group: 'Shopping', logic: 'wants', limit: 0 },
                { name: 'Hobbies', group: 'Lifestyle', logic: 'wants', limit: 0 },
                { name: 'Gifts & Donations', group: 'Lifestyle', logic: 'wants', limit: 0 },

                // --- ENTERTAINMENT (WANTS) ---
                { name: 'Streaming Services', group: 'Entertainment', logic: 'wants', limit: 0 },
                { name: 'Movies / Events', group: 'Entertainment', logic: 'wants', limit: 0 },
                { name: 'Vacation / Travel', group: 'Entertainment', logic: 'wants', limit: 0 },
                { name: 'Gaming', group: 'Entertainment', logic: 'wants', limit: 0 },

                // --- FINANCIAL (SPLIT LOGIC) ---
                { name: 'Debt Payment', group: 'Financial', logic: 'needs', limit: 0 },
                { name: 'Emergency Fund', group: 'Financial', logic: 'savings', limit: 0 },
                { name: 'Investments / Stocks', group: 'Financial', logic: 'savings', limit: 0 },
                { name: 'Crypto / Speculation', group: 'Financial', logic: 'savings', limit: 0 },
                { name: 'Bank Fees', group: 'Financial', logic: 'needs', limit: 0 }
            ]
        },
        chartInstance: null, trendChartInstance: null, GH_KEY: 'FinTrack_GH_Creds', wizData: { bills: [], vaults: [] },

        init() { 
            this.loadData(); 
            this.setDates(); 
            if(document.getElementById('add-form')) document.getElementById('add-form').addEventListener('submit', (e) => { e.preventDefault(); this.addTransaction(); }); 
            if(document.getElementById('income-form')) document.getElementById('income-form').addEventListener('submit', (e) => { e.preventDefault(); this.addIncome(); }); 
            
            const dateEl = document.getElementById('current-date'); 
            if(dateEl) dateEl.innerText = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }); 
            
            const pdInput = document.getElementById('pay-day-input'); 
            if(pdInput) pdInput.value = this.data.payDay || 1; 
            
            const setPd = document.getElementById('set-pay-day'); 
            if(setPd) setPd.value = this.data.payDay || 1; 
            
            const creds = JSON.parse(localStorage.getItem(this.GH_KEY) || '{}'); 
            if(creds.token && document.getElementById('gh-token')) document.getElementById('gh-token').value = creds.token; 
            if(creds.gist && document.getElementById('gh-gist')) document.getElementById('gh-gist').value = creds.gist; 
            
            this.renderAll(); 
        },

        setDates() { 
            const t = new Date().toISOString().split('T')[0]; 
            if(document.getElementById('t-date')) document.getElementById('t-date').value = t; 
            if(document.getElementById('i-date')) document.getElementById('i-date').value = t; 
        },

        loadData() {
            const saved = localStorage.getItem('finTrackData_v24_NewCats'); 
            if (saved) {
                try { 
                    const p = JSON.parse(saved); 
                    this.data.transactions = p.transactions || []; 
                    this.data.incomes = p.incomes || []; 
                    this.data.savings = p.savings || []; 
                    this.data.bills = p.bills || []; 
                    this.data.payDay = parseInt(p.payDay);
                    if (isNaN(this.data.payDay)) this.data.payDay = 1;
                    this.data.currency = p.currency || 'â‚¬';
                } catch (e) { console.error("Data load error", e); }
            } else { 
                document.getElementById('wizard-modal').classList.remove('hidden'); 
            }
        },

        saveData() { 
            localStorage.setItem('finTrackData_v24_NewCats', JSON.stringify(this.data)); 
            this.renderAll(); 
        },

        resetData() { 
            if(confirm("Reset Everything?")) { 
                localStorage.removeItem('finTrackData_v24_NewCats'); 
                location.reload(); 
            } 
        },

        exportToCSV() { const rows=[]; rows.push(['Type','Date','Desc','Category','Amount']); this.data.incomes.forEach(i=>rows.push(['Income',i.date,i.source,'N/A',i.amount])); this.data.transactions.forEach(t=>rows.push(['Expense',t.date,t.desc,t.category,t.amount])); let c="data:text/csv;charset=utf-8,"+rows.map(e=>e.join(",")).join("\n"); const l=document.createElement("a"); l.href=encodeURI(c); l.download="fintrack.csv"; document.body.appendChild(l); l.click(); document.body.removeChild(l); },
        saveGHCreds(){ const t=document.getElementById('gh-token').value; const g=document.getElementById('gh-gist').value; localStorage.setItem(this.GH_KEY,JSON.stringify({token:t,gist:g})); alert("Saved!"); },
        async pullFromGitHub(){ const c=JSON.parse(localStorage.getItem(this.GH_KEY)||'{}'); if(!c.token)return alert("Keys missing"); try{ const r=await fetch(`https://api.github.com/gists/${c.gist}`,{headers:{'Authorization':`token ${c.token}`}}); if(!r.ok)throw new Error("Err"); const j=await r.json(); localStorage.setItem('finTrackData_v24_NewCats',j.files['fintrack.json'].content); location.reload(); }catch(e){alert("Error");} },
        async pushToGitHub(){ const c=JSON.parse(localStorage.getItem(this.GH_KEY)||'{}'); if(!c.token)return alert("Keys missing"); try{ await fetch(`https://api.github.com/gists/${c.gist}`,{method:'PATCH',headers:{'Authorization':`token ${c.token}`,'Content-Type':'application/json'},body:JSON.stringify({files:{"fintrack.json":{content:JSON.stringify(this.data)}}})}); alert("Pushed!"); }catch(e){alert("Error");} },
        
        skipWizard(){ document.getElementById('wizard-modal').classList.add('hidden'); this.saveData(); },
        wizNext(s){ ['wiz-step-0','wiz-step-1','wiz-step-2','wiz-step-3'].forEach(id=>document.getElementById(id).classList.add('hidden')); document.getElementById(`wiz-step-${s}`).classList.remove('hidden'); },
        wizAddBill(){ const n=document.getElementById('wiz-bill-name').value; const a=parseFloat(document.getElementById('wiz-bill-amt').value); if(n&&a){ this.wizData.bills.push({name:n,amount:a}); document.getElementById('wiz-bill-name').value=''; document.getElementById('wiz-bill-amt').value=''; this.wizRenderList('wiz-bills-list',this.wizData.bills,''); } },
        wizAddVault(){ const n=document.getElementById('wiz-vault-name').value; if(n){ this.wizData.vaults.push({name:n}); document.getElementById('wiz-vault-name').value=''; this.wizRenderList('wiz-vaults-list',this.wizData.vaults,''); } },
        wizRenderList(id,l,p){ document.getElementById(id).innerHTML=l.map(i=>`<div class="text-sm bg-white p-1 mb-1 flex justify-between"><span>${i.name}</span><span>${i.amount?i.amount:''}</span></div>`).join(''); },
        wizFinish(){ 
            const cur=document.getElementById('wiz-currency').value; const sal=parseFloat(document.getElementById('wiz-salary').value); const pd=parseInt(document.getElementById('wiz-payday').value);
            this.data.currency=cur; this.data.payDay=pd||1;
            if(sal) this.data.incomes.push({id:Date.now(),date:new Date().toISOString().split('T')[0],source:'Salary',amount:sal});
            this.wizData.bills.forEach(b=>this.data.bills.push({id:Date.now()+Math.random(),name:b.name,amount:b.amount,history:[]}));
            this.wizData.vaults.forEach(v=>this.data.savings.push({id:Date.now()+Math.random(),name:v.name,current:0,history:[]}));
            this.saveData(); document.getElementById('wizard-modal').classList.add('hidden');
        },

        updatePayDay(v) { 
            const d=parseInt(v); 
            if(d && d>=1 && d<=31){
                this.data.payDay=d; 
                this.saveData();
            } 
        },
        
        getDaysUntilPayday() {
            const now = new Date();
            now.setHours(0, 0, 0, 0);
            const day = this.data.payDay;
            let target = new Date(now.getFullYear(), now.getMonth(), day);
            if (target < now) {
                target.setMonth(target.getMonth() + 1);
            }
            const diff = target - now;
            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
            return { days: days, date: target.toLocaleDateString() };
        },

        addBill(){const n=document.getElementById('b-name').value;const a=parseFloat(document.getElementById('b-amount').value);if(n&&a){this.data.bills.push({id:Date.now(),name:n,amount:a,history:[]});this.saveData();document.getElementById('b-name').value='';document.getElementById('b-amount').value='';}},
        payBill(id){const b=this.data.bills.find(x=>x.id===id);if(b){const a=parseFloat(prompt("Confirm:",b.amount));if(a){this.data.transactions.push({id:Date.now(),date:new Date().toISOString().split('T')[0],desc:`Bill: ${b.name}`,category:'Housing (General)',amount:a});b.history.unshift({date:new Date().toISOString().split('T')[0],amount:a});this.saveData();}}},
        deleteBill(id){if(confirm("Del?")) {this.data.bills=this.data.bills.filter(x=>x.id!==id);this.saveData();}},
        addVault(){const n=document.getElementById('s-name').value;if(n){this.data.savings.push({id:Date.now(),name:n,current:0,history:[]});this.saveData();document.getElementById('s-name').value='';}},
        transactionVault(id,t){const v=this.data.savings.find(x=>x.id===id);const a=parseFloat(document.getElementById(`amt-${id}`).value);if(v&&a){if(t==='deposit'){v.current+=a;v.history.unshift({date:new Date().toISOString().split('T')[0],type:'Deposit',amount:a});}else{if(v.current>=a){v.current-=a;v.history.unshift({date:new Date().toISOString().split('T')[0],type:'Withdraw',amount:a});}}document.getElementById(`amt-${id}`).value='';this.saveData();}},
        deleteVault(id){if(confirm("Del?")){this.data.savings=this.data.savings.filter(x=>x.id!==id);this.saveData();}},
        addIncome(){const s=document.getElementById('i-source').value;const a=parseFloat(document.getElementById('i-amount').value);if(s&&a){this.data.incomes.push({id:Date.now(),date:document.getElementById('i-date').value,source:s,amount:a});this.saveData();document.getElementById('i-source').value='';document.getElementById('i-amount').value='';}},
        deleteIncome(id){if(confirm("Del?")){this.data.incomes=this.data.incomes.filter(x=>x.id!==id);this.saveData();}},
        addTransaction(){const d=document.getElementById('t-desc').value;const a=parseFloat(document.getElementById('t-amount').value);if(d&&a){this.data.transactions.push({id:Date.now(),date:document.getElementById('t-date').value,desc:d,category:document.getElementById('t-cat').value,amount:a});this.saveData();document.getElementById('t-desc').value='';document.getElementById('t-amount').value='';}},
        deleteTransaction(id){if(confirm("Del?")){this.data.transactions=this.data.transactions.filter(x=>x.id!==id);this.saveData();}},
        clearTransactions(){if(confirm("Clear All?")){this.data.transactions=[];this.saveData();}},
        addCategory(){const n=document.getElementById('new-cat-name').value;const l=parseFloat(document.getElementById('new-cat-limit').value);const lg=document.getElementById('new-cat-logic').value;if(n){this.data.categories.push({name:n,group:'Custom',logic:lg,limit:l});this.saveData();document.getElementById('new-cat-name').value='';}},
        deleteCategory(n){if(confirm("Del?")){this.data.categories=this.data.categories.filter(c=>c.name!==n);this.saveData();}},
        updateBudgetLimit(n,v){const c=this.data.categories.find(x=>x.name===n);if(c){c.limit=parseFloat(v);this.saveData();}},

        renderAll() { 
            this.renderDropdowns(); 
            this.renderTables(); 
            this.renderCharts(); 
            this.renderSavings(); 
            this.renderBills(); 
            this.renderMonthlySummary(); 
            this.renderPayDayInfo(); 
        },

        renderBills() { 
            const l=document.getElementById('bills-list'); 
            if(l) l.innerHTML=this.data.bills.map(b=>`
                <div class="bg-white p-3 rounded-lg border shadow-sm relative hover:shadow-md transition">
                    <button onclick="app.deleteBill(${b.id})" class="absolute top-2 right-2 text-gray-300 hover:text-red-500 text-xs">âœ•</button>
                    <h5 class="font-bold text-gray-800 text-sm mb-1 truncate">${b.name}</h5>
                    <div class="text-xs text-gray-500 mb-2">${this.data.currency}${b.amount}</div>
                    <button onclick="app.payBill(${b.id})" class="w-full bg-orange-100 text-orange-700 hover:bg-orange-200 py-1 rounded text-xs font-bold transition">Mark Paid</button>
                </div>`).join(''); 
        },
        
        renderSavings() { 
            const l=document.getElementById('savings-list'); 
            if(l) l.innerHTML=this.data.savings.map(s=>`
                <div class="bg-white p-3 rounded-lg border shadow-sm relative hover:shadow-md transition">
                    <button onclick="app.deleteVault(${s.id})" class="absolute top-2 right-2 text-gray-300 hover:text-red-500 text-xs">âœ•</button>
                    <h5 class="font-bold text-gray-800 text-sm mb-1 truncate">${s.name}</h5>
                    <h2 class="text-lg font-bold text-purple-600 mb-2">${this.data.currency}${s.current.toLocaleString()}</h2>
                    <div class="flex gap-1">
                        <input type="number" step="0.01" id="amt-${s.id}" class="w-full border rounded p-1 text-xs" placeholder="Amt">
                        <button onclick="app.transactionVault(${s.id},'deposit')" class="bg-green-100 text-green-700 hover:bg-green-200 px-2 py-1 rounded text-xs font-bold">+</button>
                        <button onclick="app.transactionVault(${s.id},'withdraw')" class="bg-red-100 text-red-700 hover:bg-red-200 px-2 py-1 rounded text-xs font-bold">-</button>
                    </div>
                </div>`).join(''); 
            if(document.getElementById('total-saved-display')) document.getElementById('total-saved-display').textContent=this.data.currency+this.data.savings.reduce((a,b)=>a+b.current,0).toLocaleString(); 
        },

        renderPayDayInfo() { 
            try {
                const info = this.getDaysUntilPayday(); 
                const dashEl = document.getElementById('dash-payday-count');
                if(dashEl) dashEl.innerHTML = `<span class="font-bold text-white">${info.days} days</span> until Payday (${info.date})`; 
                
                const incCount = document.getElementById('income-payday-count');
                if(incCount) incCount.textContent = `${info.days} Days Left`; 
                
                const el = document.getElementById('pay-day-input'); 
                if(el && document.activeElement !== el) el.value = this.data.payDay || 1; 
            } catch(e) { console.error("Payday render error", e); }
        },

        renderMonthlySummary() {
            try {
                const cur = this.data.currency || 'â‚¬';
                const now = new Date();
                const currentMonth = now.getMonth();
                const currentYear = now.getFullYear();
                
                const monthNameEl = document.getElementById('summary-month-name');
                const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                if(monthNameEl) monthNameEl.textContent = monthNames[currentMonth];

                const isM = (d) => { const x=new Date(d); return x.getMonth()===currentMonth && x.getFullYear()===currentYear; };
                
                const inc = this.data.incomes.filter(i=>isM(i.date)).reduce((a,b)=>a+b.amount,0);
                let sav = 0; 
                this.data.savings.forEach(v=>{if(v.history)v.history.forEach(h=>{if(h.type==='Deposit'&&isM(h.date))sav+=h.amount;});});
                
                let bills=0; let varSpend=0; let needs=0; let wants=0; 
                this.data.transactions.forEach(t=>{
                    if(isM(t.date)){
                        if(t.desc.startsWith("Bill Payment:")) bills+=t.amount; else varSpend+=t.amount;
                        const cat=this.data.categories.find(c=>c.name===t.category);
                        const logic=cat?cat.logic:'wants';
                        if(logic==='needs') needs+=t.amount; else if(logic==='wants') wants+=t.amount;
                    }
                });

                // Update Total Expense Card
                const totalExp = bills + varSpend;
                if(document.getElementById('sum-total-expense')) document.getElementById('sum-total-expense').textContent = `${cur}${totalExp.toFixed(2)}`;

                if(document.getElementById('sum-income')) document.getElementById('sum-income').textContent = `${cur}${inc.toFixed(2)}`;
                if(document.getElementById('sum-savings')) document.getElementById('sum-savings').textContent = `${cur}${sav.toFixed(2)}`;
                
                const net = inc - (totalExp + sav);
                const netEl = document.getElementById('sum-net');
                if(netEl) { 
                    netEl.textContent = `${cur}${net.toLocaleString()}`; 
                    netEl.className = net < 0 ? 'text-xl font-bold text-red-300' : 'text-xl font-bold text-green-300';
                }

                const info = this.getDaysUntilPayday();
                const dLeft = Math.max(1, info.days); 
                const wLeft = Math.max(1, dLeft / 7);

                if(document.getElementById('power-disposable')) document.getElementById('power-disposable').textContent = `${cur}${net.toLocaleString()}`;
                if(document.getElementById('power-daily')) document.getElementById('power-daily').textContent = `${cur}${(net/dLeft).toFixed(2)}`;
                if(document.getElementById('power-weekly')) document.getElementById('power-weekly').textContent = `${cur}${(net/wLeft).toFixed(2)}`;

                // --- PROGRESS BARS UPDATE ---
                const totalBudget = inc > 0 ? inc : 1;
                
                const needsTarget = totalBudget * 0.50;
                const needsPct = Math.min(100, (needs / needsTarget) * 100);
                document.getElementById('prog-needs-bar').style.width = `${needsPct}%`;
                document.getElementById('prog-needs-text').textContent = `${cur}${needs.toFixed(0)} / ${cur}${needsTarget.toFixed(0)}`;
                document.getElementById('prog-needs-bar').className = `h-4 rounded-full progress-bar ${needsPct > 100 ? 'bg-red-500' : 'bg-blue-500'}`;

                const wantsTarget = totalBudget * 0.30;
                const wantsPct = Math.min(100, (wants / wantsTarget) * 100);
                document.getElementById('prog-wants-bar').style.width = `${wantsPct}%`;
                document.getElementById('prog-wants-text').textContent = `${cur}${wants.toFixed(0)} / ${cur}${wantsTarget.toFixed(0)}`;
                document.getElementById('prog-wants-bar').className = `h-4 rounded-full progress-bar ${wantsPct > 100 ? 'bg-red-500' : 'bg-orange-500'}`;

                const saveTarget = totalBudget * 0.20;
                const savePct = Math.min(100, (sav / saveTarget) * 100);
                document.getElementById('prog-save-bar').style.width = `${savePct}%`;
                document.getElementById('prog-save-text').textContent = `${cur}${sav.toFixed(0)} / ${cur}${saveTarget.toFixed(0)}`;

                // --- HEALTH SCORE CALC ---
                let score = 0;
                if(inc > 0) {
                    const saveRate = (sav / inc) * 100;
                    if(saveRate >= 20) score += 40; else score += (saveRate * 2);
                    
                    const needsRate = (needs / inc) * 100;
                    if(needsRate <= 50) score += 30; else if(needsRate < 80) score += 15;

                    if(net >= 0) score += 30; 
                }
                const scoreEl = document.getElementById('health-score');
                const scoreCircle = document.getElementById('score-circle');
                if(scoreEl) scoreEl.textContent = Math.round(score);
                if(scoreCircle) {
                    scoreCircle.setAttribute('stroke-dasharray', `${score}, 100`);
                    scoreCircle.setAttribute('class', score > 70 ? 'text-green-500' : (score > 40 ? 'text-yellow-500' : 'text-red-500'));
                }
                const msgEl = document.getElementById('health-msg');
                if(msgEl) msgEl.textContent = score > 80 ? "Excellent!" : (score > 50 ? "Good, keep saving." : "Needs attention.");

            } catch(e) { console.error("Summary error", e); }
        },

        renderDropdowns() { 
            const d=document.getElementById('t-cat'); 
            if(!d)return; 
            const groups = {};
            this.data.categories.forEach(c => {
                if(!groups[c.group]) groups[c.group] = [];
                groups[c.group].push(c);
            });
            let h=''; 
            const ic={'needs':'ðŸ ','wants':'ðŸŽ®','savings':'ðŸ’°'}; 
            Object.keys(groups).forEach(k=>{
                h+=`<optgroup label="${k}">`; 
                groups[k].forEach(c=>{
                    h+=`<option value="${c.name}">${ic[c.logic]||'â€¢'} ${c.name}</option>`
                }); 
                h+=`</optgroup>`;
            }); 
            d.innerHTML=h; 
        },
        
        renderTables() { const cur=this.data.currency||'â‚¬'; const iB=document.getElementById('income-table-body'); if(iB)iB.innerHTML=this.data.incomes.sort((a,b)=>new Date(b.date)-new Date(a.date)).map(i=>`<tr class="border-b"><td class="p-2 text-gray-500 text-xs">${i.date}</td><td class="p-2 font-bold text-sm">${i.source}</td><td class="p-2 text-right text-green-600 font-bold text-sm">+${cur}${i.amount}</td><td class="p-2 text-right"><button onclick="app.deleteIncome(${i.id})" class="text-red-400 text-xs">âœ•</button></td></tr>`).join(''); const tB=document.getElementById('full-table-body'); if(tB)tB.innerHTML=this.data.transactions.sort((a,b)=>new Date(b.date)-new Date(a.date)).map(t=>`<tr class="border-b"><td class="p-2 text-gray-500 text-xs">${t.date}</td><td class="p-2 font-bold text-sm">${t.desc}</td><td class="p-2 text-xs bg-blue-50 text-blue-600 rounded w-fit">${t.category}</td><td class="p-2 text-right text-gray-700 font-bold text-sm">-${cur}${t.amount}</td><td class="p-2 text-right"><button onclick="app.deleteTransaction(${t.id})" class="text-red-400 text-xs">âœ•</button></td></tr>`).join(''); const sB=document.getElementById('settings-table-body'); if(sB)sB.innerHTML=this.data.categories.map(c=>`<tr class="border-b"><td class="p-2 font-medium text-sm">${c.name}</td><td class="p-2"><input type="number" value="${c.limit}" onchange="app.updateBudgetLimit('${c.name}',this.value)" class="border w-20 text-sm"></td><td class="p-2 text-right"><button onclick="app.deleteCategory('${c.name}')" class="text-red-400 text-xs">âœ•</button></td></tr>`).join(''); },
        
        renderCharts() { 
            const ctx1 = document.getElementById('expenseChart');
            const ctxTrend = document.getElementById('trendChart'); 
            
            if(!ctx1) return; 

            const gS={}; 
            const trendData = {}; 

            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            const isM = (d) => { const x=new Date(d); return x.getMonth()===currentMonth && x.getFullYear()===currentYear; };

            this.data.transactions.forEach(t=>{
                if(isM(t.date)) {
                    const c = this.data.categories.find(x => x.name === t.category); 
                    const g = c ? c.group : 'Other'; 
                    gS[g] = (gS[g]||0)+t.amount; 

                    const day = t.date.split('-')[2]; 
                    trendData[day] = (trendData[day]||0) + t.amount;
                }
            }); 
            
            if(this.chartInstance) this.chartInstance.destroy(); 
            this.chartInstance = new Chart(ctx1.getContext('2d'), {
                type:'doughnut',
                data:{
                    labels:Object.keys(gS),
                    datasets:[{data:Object.values(gS),backgroundColor:['#3b82f6','#10b981','#f59e0b','#ef4444','#8b5cf6','#6366f1']}]
                },
                options:{
                    responsive: true,
                    maintainAspectRatio: false, // Don't let chart control height
                    plugins:{legend:{position:'right'}}
                }
            }); 

            if(ctxTrend) {
                if(this.trendChartInstance) this.trendChartInstance.destroy();
                
                const days = Object.keys(trendData).sort();
                const values = days.map(d => trendData[d]);

                this.trendChartInstance = new Chart(ctxTrend.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: days,
                        datasets: [{
                            label: 'Daily Spending',
                            data: values,
                            backgroundColor: '#3b82f6',
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false, // THIS FIXED THE OVERFLOW
                        scales: { y: { beginAtZero: true } },
                        plugins: { legend: { display: false } }
                    }
                });
            }
        },
        
        showTab(tabName) { ['dashboard','income','transactions','settings','savings','bills','budgets'].forEach(t=>{document.getElementById(`view-${t}`).classList.add('hidden');document.getElementById(`nav-${t}`).classList.remove('active');}); document.getElementById(`view-${tabName}`).classList.remove('hidden'); document.getElementById(`nav-${tabName}`).classList.add('active'); document.getElementById('page-title').innerText=tabName.charAt(0).toUpperCase()+tabName.slice(1); }
    };
    app.init();
</script>
</body>
</html>
